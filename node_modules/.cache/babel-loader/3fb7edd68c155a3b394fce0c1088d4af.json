{"ast":null,"code":"/* eslint-disable eqeqeq */\nimport { SIGN_UP, SIGN_IN, CHECK_AUTH } from \"../actionTypes\";\nimport { setLoading } from \"./commonActions\";\nimport axios from \"axios\"; //-----------------------------------------\n// const url = process.env.REACT_APP_API_URL;\n\nexport const signUp = (dispatch, user, setToken, setUserId, setIsAdmin) => {\n  setLoading(dispatch, true);\n  axios({\n    method: \"post\",\n    url: `https://booking-nestjs.herokuapp.com/customer/auth/sign-up`,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    data: {\n      name: user.name,\n      email: user.email,\n      address: user.address,\n      city: user.city,\n      password: user.password,\n      is_admin: 0\n    }\n  }).then(response => {\n    setToken(response.data.data.success ? response.data.data.token : null);\n    setUserId(response.data.data.success ? response.data.data.user_id : null);\n    setIsAdmin(response.data.data.success ? response.data.data.is_admin : null);\n    dispatch({\n      type: SIGN_UP,\n      payload: response.data.data\n    });\n    setLoading(dispatch, false);\n  }).catch(error => {\n    // window.location.replace(\"/\");\n    console.log(error);\n  });\n}; //-----------------------------------------\n\nexport const signIn = (dispatch, user, setToken, setUserId, setIsAdmin) => {\n  setLoading(dispatch, true);\n  axios({\n    method: \"post\",\n    url: `https://booking-nestjs.herokuapp.com/customer/auth/sign-in`,\n    headers: {\n      \"Content-Type\": \" application/json\"\n    },\n    data: {\n      email: user.email,\n      password: user.password\n    }\n  }).then(response => {\n    setToken(response.data.data.success ? response.data.data.token : null);\n    setUserId(response.data.data.success ? response.data.data.user_id : null);\n    setIsAdmin(response.data.data.success ? response.data.data.is_admin : null);\n    localStorage.setItem(\"first_login\", true);\n    dispatch({\n      type: SIGN_IN,\n      payload: response.data.data\n    });\n    setLoading(dispatch, false);\n  }).catch(error => {\n    // window.location.replace(\"/\");\n    console.log(error);\n  });\n}; //-----------------------------------------\n\nexport const checkAuth = (dispatch, _token, userId, isAdmin) => {\n  let token = _token;\n  let user_id = userId;\n  let is_admin = isAdmin == \"1\" || isAdmin == 1 ? true : false;\n  token != null && token != \"null\" && token != \"\" // eslint-disable-line\n  ? dispatch({\n    type: CHECK_AUTH,\n    payload: {\n      isAuthenticated: true,\n      user_id,\n      token,\n      is_admin\n    }\n  }) : dispatch({\n    type: CHECK_AUTH,\n    payload: {\n      isAuthenticated: false,\n      user_id: null,\n      token: null,\n      is_admin: null\n    }\n  });\n};","map":{"version":3,"sources":["/Users/lephuochoang/Hoc/Project/vibo.com/booking/web/src/redux/actions/auth.action.js"],"names":["SIGN_UP","SIGN_IN","CHECK_AUTH","setLoading","axios","signUp","dispatch","user","setToken","setUserId","setIsAdmin","method","url","headers","data","name","email","address","city","password","is_admin","then","response","success","token","user_id","type","payload","catch","error","console","log","signIn","localStorage","setItem","checkAuth","_token","userId","isAdmin","isAuthenticated"],"mappings":"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","sourcesContent":["/* eslint-disable eqeqeq */\nimport { SIGN_UP, SIGN_IN, CHECK_AUTH } from \"../actionTypes\";\nimport { setLoading } from \"./commonActions\";\nimport axios from \"axios\";\n\n//-----------------------------------------\n// const url = process.env.REACT_APP_API_URL;\n\nexport const signUp = (dispatch, user, setToken, setUserId, setIsAdmin) => {\n    setLoading(dispatch, true);\n    axios({\n        method: \"post\",\n        url: `https://booking-nestjs.herokuapp.com/customer/auth/sign-up`,\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        data: {\n            name: user.name,\n            email: user.email,\n            address: user.address,\n            city: user.city,\n            password: user.password,\n            is_admin: 0\n        }\n    })\n        .then((response) => {\n            setToken(\n                response.data.data.success ? response.data.data.token : null\n            );\n            setUserId(\n                response.data.data.success ? response.data.data.user_id : null\n            );\n            setIsAdmin(\n                response.data.data.success ? response.data.data.is_admin : null\n            );\n            dispatch({\n                type: SIGN_UP,\n                payload: response.data.data\n            });\n            setLoading(dispatch, false);\n        })\n        .catch((error) => {\n            // window.location.replace(\"/\");\n            console.log(error);\n        });\n};\n//-----------------------------------------\n\nexport const signIn = (dispatch, user, setToken, setUserId, setIsAdmin) => {\n    setLoading(dispatch, true);\n    axios({\n        method: \"post\",\n        url: `https://booking-nestjs.herokuapp.com/customer/auth/sign-in`,\n        headers: {\n            \"Content-Type\": \" application/json\"\n        },\n        data: {\n            email: user.email,\n            password: user.password\n        }\n    })\n        .then((response) => {\n            setToken(\n                response.data.data.success ? response.data.data.token : null\n            );\n            setUserId(\n                response.data.data.success ? response.data.data.user_id : null\n            );\n            setIsAdmin(\n                response.data.data.success ? response.data.data.is_admin : null\n            );\n\n            localStorage.setItem(\"first_login\", true);\n\n            dispatch({\n                type: SIGN_IN,\n                payload: response.data.data\n            });\n            setLoading(dispatch, false);\n        })\n        .catch((error) => {\n            // window.location.replace(\"/\");\n            console.log(error);\n        });\n};\n//-----------------------------------------\n\nexport const checkAuth = (dispatch, _token, userId, isAdmin) => {\n    let token = _token;\n    let user_id = userId;\n    let is_admin = isAdmin == \"1\" || isAdmin == 1 ? true : false;\n    token != null && token != \"null\" && token != \"\" // eslint-disable-line\n        ? dispatch({\n              type: CHECK_AUTH,\n              payload: {\n                  isAuthenticated: true,\n                  user_id,\n                  token,\n                  is_admin\n              }\n          })\n        : dispatch({\n              type: CHECK_AUTH,\n              payload: {\n                  isAuthenticated: false,\n                  user_id: null,\n                  token: null,\n                  is_admin: null\n              }\n          });\n};\n"]},"metadata":{},"sourceType":"module"}